<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ann Fritz - Portfolio</title>
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: '#0a192f',
                        'light-navy': '#112240',
                        'lightest-navy': '#233554',
                        slate: '#8892b0',
                        'light-slate': '#a8b2d1',
                        'lightest-slate': '#ccd6f6',
                        white: '#e6f1ff',
                        green: '#64ffda',
                        'green-tint': 'rgba(100, 255, 218, 0.1)',
                    },
                    fontFamily: {
                        sans: ['"Calibre"', '"Inter"', '"San Francisco"', '"SF Pro Text"', '-apple-system', 'system-ui', 'sans-serif'],
                        mono: ['"SF Mono"', '"Fira Code"', '"Fira Mono"', '"Roboto Mono"', 'monospace'],
                    }
                }
            }
        }
    </script>
    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/ogl@1/dist/ogl.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* Custom Styles */
        body { margin: 0; overflow-x: hidden; }
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #0a192f; }
        ::-webkit-scrollbar-thumb { background: #8892b0; border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: #64ffda; }
        
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: none;
        }

        /* Loader */
        .loader {
            border: 3px solid rgba(100,255,218,0.1);
            border-radius: 50%;
            border-top: 3px solid #64ffda;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
<script type="importmap">
{
  "imports": {
    "@supabase/supabase-js": "https://aistudiocdn.com/@supabase/supabase-js@^2.87.1",
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.556.0"
  }
}
</script>
</head>
<body class="bg-navy text-slate font-sans antialiased selection:bg-lightest-navy selection:text-white relative">
    
    <!-- Visual Effects Containers -->
    <div id="ribbons-container" class="fixed top-0 left-0 w-full h-full pointer-events-none z-0"></div>
    <canvas id="click-spark-canvas" class="fixed top-0 left-0 w-full h-full pointer-events-none z-[9999]"></canvas>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-navy/90 backdrop-blur-md z-50 py-4 shadow-lg transition-all duration-300" id="navbar">
        <div class="max-w-6xl mx-auto px-6 md:px-10 flex justify-between items-center">
            <a href="#" class="text-green text-xl font-bold font-mono z-50">Ann Fritz</a>
            
            <!-- Desktop Menu -->
            <ul class="hidden md:flex gap-8 items-center list-none">
                <li><a href="#about" class="nav-link text-xs font-mono hover:text-green transition-colors"><span class="text-green mr-1">01.</span>About</a></li>
                <li><a href="#certificate" class="nav-link text-xs font-mono hover:text-green transition-colors"><span class="text-green mr-1">02.</span>Certificate</a></li>
                <li><a href="#projects" class="nav-link text-xs font-mono hover:text-green transition-colors"><span class="text-green mr-1">03.</span>Projects</a></li>
                <li><a href="#achievements" class="nav-link text-xs font-mono hover:text-green transition-colors"><span class="text-green mr-1">04.</span>Achievements</a></li>
                <li><a href="#contact" class="nav-link text-xs font-mono hover:text-green transition-colors"><span class="text-green mr-1">05.</span>Contact</a></li>
                <li><a href="/cv.pdf" target="_blank" class="border border-green text-green px-4 py-2 rounded text-xs font-mono hover:bg-green-tint transition-colors">Resume</a></li>
            </ul>

            <!-- Mobile Hamburger -->
            <button class="md:hidden z-50 flex flex-col gap-1.5 cursor-pointer" id="mobile-menu-btn">
                <span class="w-8 h-0.5 bg-green transition-transform origin-right"></span>
                <span class="w-8 h-0.5 bg-green transition-opacity"></span>
                <span class="w-8 h-0.5 bg-green transition-transform origin-right"></span>
            </button>
        </div>
        
        <!-- Mobile Menu Overlay -->
        <div class="fixed inset-0 bg-navy flex flex-col justify-center items-center gap-8 transform translate-x-full transition-transform duration-300 md:hidden h-screen w-screen" id="mobile-menu">
            <a href="#about" class="mobile-link text-lg font-mono hover:text-green">01. About</a>
            <a href="#certificate" class="mobile-link text-lg font-mono hover:text-green">02. Certificate</a>
            <a href="#projects" class="mobile-link text-lg font-mono hover:text-green">03. Projects</a>
            <a href="#achievements" class="mobile-link text-lg font-mono hover:text-green">04. Achievements</a>
            <a href="#contact" class="mobile-link text-lg font-mono hover:text-green">05. Contact</a>
            <a href="/cv.pdf" class="border border-green text-green px-8 py-3 rounded text-sm font-mono hover:bg-green-tint">Resume</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="px-6 md:px-24 max-w-6xl mx-auto w-full relative z-10">
        
        <!-- Hero Section -->
        <section class="min-h-screen flex flex-col justify-center items-start pt-24 fade-in-section">
            <p class="text-green font-mono mb-5 ml-1">Hi, my name is</p>
            <h1 class="text-4xl md:text-7xl font-bold text-lightest-slate mb-4">Ann Fritz.</h1>
            <h2 class="text-3xl md:text-6xl font-bold text-slate mb-8">I build things for the web.</h2>
            <p class="max-w-xl text-slate text-lg mb-12 leading-relaxed">
                I'm a 4th year Information Technology student specializing in building user-friendly, accessible websites and applications. Currently focused on creating inclusive digital experiences.
            </p>
            <a href="#projects" class="border border-green text-green px-7 py-4 rounded font-mono text-sm hover:bg-green-tint transition-colors">Check out my course!</a>
        </section>

        <!-- About Section -->
        <section id="about" class="py-24 fade-in-section">
            <h2 class="flex items-center text-2xl md:text-3xl font-bold text-lightest-slate mb-10">
                <span class="text-green font-mono text-xl mr-2">01.</span> About Me
                <span class="h-px bg-lightest-navy flex-grow ml-4 max-w-xs"></span>
            </h2>
            <div class="grid md:grid-cols-3 gap-12">
                <div class="md:col-span-2 text-slate space-y-4">
                    <p>Hello! My name is Ann Fritz De Luna and I enjoy creating things that live on the internet. My interest in web development started back in 2020 when I decided to try editing custom Tumblr themes ‚Äî turns out hacking together HTML & CSS is fun!</p>
                    <p>Fast-forward to today, and I've had the privilege of working on various student projects and freelance gigs. My main focus these days is building accessible, inclusive products and digital experiences.</p>
                    <p>Here are a few technologies I've been working with recently:</p>
                    <ul class="grid grid-cols-2 gap-2 font-mono text-sm mt-4">
                        <li class="flex items-center before:content-['‚ñπ'] before:text-green before:mr-2">JavaScript (ES6+)</li>
                        <li class="flex items-center before:content-['‚ñπ'] before:text-green before:mr-2">TypeScript</li>
                        <li class="flex items-center before:content-['‚ñπ'] before:text-green before:mr-2">React</li>
                        <li class="flex items-center before:content-['‚ñπ'] before:text-green before:mr-2">Node.js</li>
                        <li class="flex items-center before:content-['‚ñπ'] before:text-green before:mr-2">Supabase</li>
                        <li class="flex items-center before:content-['‚ñπ'] before:text-green before:mr-2">Tailwind CSS</li>
                    </ul>
                </div>
                <div class="relative group max-w-xs mx-auto md:mx-0">
                    <div class="relative w-full aspect-square rounded bg-green/20 hover:bg-transparent transition-colors duration-300">
                         <!-- Placeholder for profile image -->
                         <div class="absolute inset-0 bg-navy mix-blend-screen group-hover:mix-blend-normal transition-all duration-300 border-2 border-green rounded translate-x-3 translate-y-3 group-hover:translate-x-1 group-hover:translate-y-1"></div>
                         <img src="me.jpeg" alt="Ann Fritz" class="relative z-10 rounded filter grayscale group-hover:grayscale-0 transition-all duration-300 object-cover w-full h-full" onerror="this.src='https://via.placeholder.com/300'"/>
                    </div>
                </div>
            </div>
        </section>

        <!-- Certificates Section -->
        <section id="certificate" class="py-24 fade-in-section max-w-3xl">
            <h2 class="flex items-center text-2xl md:text-3xl font-bold text-lightest-slate mb-10">
                <span class="text-green font-mono text-xl mr-2">02.</span> Where I've Learned
                <span class="h-px bg-lightest-navy flex-grow ml-4 max-w-xs"></span>
            </h2>
            <div class="flex flex-col md:flex-row gap-4" id="certificates-container">
                <!-- Dynamically populated -->
                <div class="text-center w-full py-8 text-slate font-mono">Loading certificates...</div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-24 fade-in-section">
            <h2 class="flex items-center text-2xl md:text-3xl font-bold text-lightest-slate mb-10">
                <span class="text-green font-mono text-xl mr-2">03.</span> Some Things I've Built
                <span class="h-px bg-lightest-navy flex-grow ml-4 max-w-xs"></span>
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="projects-container">
                <!-- Dynamically populated -->
                <div class="text-center w-full py-8 text-slate font-mono col-span-full">Loading projects...</div>
            </div>
        </section>

        <!-- API Playground -->
        <section id="playground" class="py-24 fade-in-section">
             <h2 class="flex items-center text-2xl md:text-3xl font-bold text-lightest-slate mb-10">
                <span class="text-green font-mono text-xl mr-2">04.</span> API Playground
                <span class="h-px bg-lightest-navy flex-grow ml-4 max-w-xs"></span>
            </h2>
            <div class="bg-light-navy rounded-lg shadow-xl overflow-hidden max-w-2xl mx-auto border border-navy">
                <div class="bg-[#0d1117] px-4 py-2 flex items-center border-b border-navy">
                    <div class="flex gap-2 mr-4">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <span class="text-slate/60 font-mono text-xs">api_client.js ‚Äî node</span>
                </div>
                <div class="p-6 font-mono text-sm">
                    <div class="text-slate mb-4">
                        <span class="text-[#c678dd]">const</span> <span class="text-[#e06c75]">getJoke</span> = <span class="text-[#c678dd]">async</span> () => {<br/>
                        &nbsp;&nbsp;<span class="text-[#c678dd]">const</span> res = <span class="text-[#c678dd]">await</span> fetch(<span class="text-[#98c379]">'https://v2.jokeapi.dev/joke/Programming'</span>);<br/>
                        &nbsp;&nbsp;<span class="text-[#c678dd]">return</span> <span class="text-[#c678dd]">await</span> res.json();<br/>
                        };
                    </div>
                    <div class="bg-navy/50 p-4 rounded border-l-2 border-green mb-6 min-h-[80px] text-green whitespace-pre-wrap" id="api-output">// System initialized. Ready to fetch...</div>
                    <button id="fetch-joke-btn" class="border border-green text-green px-4 py-2 rounded hover:bg-green-tint transition-colors text-xs tracking-wider">
                        RUN SCRIPT
                    </button>
                </div>
            </div>
        </section>

        <!-- Achievements -->
        <section id="achievements" class="py-24 fade-in-section">
            <h2 class="flex items-center text-2xl md:text-3xl font-bold text-lightest-slate mb-10">
                <span class="text-green font-mono text-xl mr-2">05.</span> Achievements
                <span class="h-px bg-lightest-navy flex-grow ml-4 max-w-xs"></span>
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="achievements-container">
                 <!-- Dynamically populated -->
                 <div class="text-center w-full py-8 text-slate font-mono col-span-full">Loading achievements...</div>
            </div>
        </section>

        <!-- Contact -->
        <section id="contact" class="py-24 mb-24 fade-in-section text-center max-w-2xl mx-auto">
            <p class="text-green font-mono mb-4">06. What's Next?</p>
            <h2 class="text-4xl md:text-5xl font-bold text-lightest-slate mb-6">Get In Touch</h2>
            <p class="text-slate text-lg mb-12">
                I'm currently looking for new opportunities. Whether you have a question or just want to say hi, I'll try my best to get back to you!
            </p>
            
            <form id="contact-form" class="text-left space-y-4 max-w-md mx-auto">
                <div>
                    <label for="name" class="block text-green font-mono text-sm mb-2">Name</label>
                    <input type="text" id="name" name="name" required class="w-full bg-light-navy border border-lightest-navy rounded p-3 text-lightest-slate focus:outline-none focus:border-green transition-colors">
                </div>
                <div>
                    <label for="email" class="block text-green font-mono text-sm mb-2">Email</label>
                    <input type="email" id="email" name="email" required class="w-full bg-light-navy border border-lightest-navy rounded p-3 text-lightest-slate focus:outline-none focus:border-green transition-colors">
                </div>
                <div>
                    <label for="message" class="block text-green font-mono text-sm mb-2">Message</label>
                    <textarea id="message" name="message" rows="4" required class="w-full bg-light-navy border border-lightest-navy rounded p-3 text-lightest-slate focus:outline-none focus:border-green transition-colors"></textarea>
                </div>
                <button type="submit" class="w-full border border-green text-green px-6 py-4 rounded font-mono text-sm hover:bg-green-tint transition-colors flex justify-center items-center gap-2">
                    <span id="submit-text">Send Message</span>
                    <div id="submit-loader" class="loader hidden"></div>
                </button>
            </form>
        </section>

    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-slate font-mono text-xs hover:text-green transition-colors cursor-default">
        <div class="flex justify-center gap-6 mb-4 md:hidden">
            <!-- Social Icons for Mobile -->
            <a href="#" class="hover:text-green hover:-translate-y-1 transition-all"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg></a>
            <a href="#" class="hover:text-green hover:-translate-y-1 transition-all"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg></a>
        </div>
        <p>Designed & Built by Ann Fritz</p>
    </footer>

    <!-- Meme Widget -->
    <div class="fixed bottom-6 right-6 z-[9999] flex flex-col items-end pointer-events-none">
        <div id="meme-popup" class="bg-light-navy border border-green rounded-lg p-4 shadow-2xl mb-4 w-80 transform translate-y-4 opacity-0 pointer-events-auto transition-all duration-300 hidden flex-col gap-3">
            <div class="flex justify-between items-center pb-2 border-b border-white/10">
                <span class="text-green font-mono text-xs font-bold">Random GIF Generator</span>
                <button id="close-meme" class="text-slate hover:text-green">&times;</button>
            </div>
            <div class="bg-black rounded overflow-hidden h-48 flex items-center justify-center relative">
                <img id="meme-img" src="" alt="GIF" class="max-w-full max-h-full object-contain hidden">
                <div id="meme-loader" class="loader"></div>
                <div id="meme-error" class="text-red-400 text-xs hidden">Failed to load GIF</div>
            </div>
            <p id="meme-caption" class="text-xs text-lightest-slate text-center line-clamp-2"></p>
            <button id="next-meme" class="w-full border border-green text-green py-2 rounded text-xs font-mono hover:bg-green-tint transition-colors">
                Next GIF ü§£
            </button>
        </div>
        <button id="meme-trigger" class="bg-green text-navy p-4 rounded-full shadow-lg hover:scale-110 transition-transform pointer-events-auto">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M7 3v18"/><path d="M3 7.5h4"/><path d="M3 12h18"/><path d="M3 16.5h4"/><path d="M17 3v18"/><path d="M17 7.5h4"/><path d="M17 16.5h4"/></svg>
        </button>
    </div>

    <!-- Application Script -->
    <script>
        // --- 1. Supabase Initialization ---
        const supabaseUrl = 'https://odqhaasjtcxsvusrtlmi.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kcWhhYXNqdGN4c3Z1c3J0bG1pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUxODcyODEsImV4cCI6MjA4MDc2MzI4MX0.6gSgYVwW-hx22ddsz477IXpHAv-nPMzFG06BoFTq9DY';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // --- 2. Data Fetching & Rendering ---
        
        async function fetchAndRender() {
            // Projects
            const projectsEl = document.getElementById('projects-container');
            const { data: projects } = await supabase.from('projects').select('*');
            
            if (projects && projects.length > 0) {
                projectsEl.innerHTML = projects.map(p => `
                    <div class="group relative bg-light-navy rounded overflow-hidden shadow-xl hover:-translate-y-2 transition-transform duration-300">
                        <div class="h-48 overflow-hidden bg-navy">
                            <!-- Placeholder for project image using color/text if url is local/broken -->
                            <div class="w-full h-full flex items-center justify-center bg-lightest-navy/20 text-green font-mono text-sm">
                                ${p.img}
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-lightest-slate mb-2 group-hover:text-green transition-colors">${p.title}</h3>
                            <p class="text-slate text-sm mb-4 font-mono">${p.tech}</p>
                            <div class="flex gap-4 text-lightest-slate">
                                <a href="#" class="hover:text-green"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg></a>
                                <a href="#" class="hover:text-green"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></a>
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                projectsEl.innerHTML = '<div class="col-span-full text-slate font-mono text-center">No projects found.</div>';
            }

            // Achievements
            const achievementsEl = document.getElementById('achievements-container');
            const { data: achievements } = await supabase.from('achievements').select('*');
            
            if (achievements && achievements.length > 0) {
                achievementsEl.innerHTML = achievements.map(a => `
                    <div class="bg-light-navy p-6 rounded shadow hover:shadow-lg transition-shadow border border-lightest-navy hover:border-green group">
                        <div class="text-4xl mb-4">üèÜ</div>
                        <h3 class="text-lightest-slate font-bold text-lg mb-2 group-hover:text-green transition-colors">${a.title}</h3>
                        <p class="text-green font-mono text-xs mb-3">${a.year}</p>
                        <p class="text-slate text-sm">${a.desc}</p>
                    </div>
                `).join('');
            } else {
                achievementsEl.innerHTML = '<div class="col-span-full text-slate font-mono text-center">No achievements found.</div>';
            }

            // Certificates
            const certificatesEl = document.getElementById('certificates-container');
            const { data: certificates } = await supabase.from('certificates').select('*');

            if (certificates && certificates.length > 0) {
                // Build Tab Buttons
                const buttonsHtml = `<div class="flex md:flex-col overflow-x-auto md:overflow-visible border-b md:border-b-0 md:border-l border-lightest-navy min-w-[150px]">
                    ${certificates.map((c, idx) => `
                        <button class="cert-btn px-5 py-3 text-left font-mono text-xs whitespace-nowrap hover:bg-light-navy hover:text-green transition-all ${idx === 0 ? 'text-green border-l-2 border-green bg-light-navy/50' : 'text-slate border-l-2 border-transparent'}" data-id="${c.id}">
                            ${c.sub || 'Certificate'}
                        </button>
                    `).join('')}
                </div>`;

                // Build Content
                const contentHtml = `<div class="flex-1 py-4 md:py-0 md:px-4 min-h-[300px]">
                    ${certificates.map((c, idx) => `
                        <div class="cert-content ${idx === 0 ? 'block fade-in-section is-visible' : 'hidden'}" id="cert-${c.id}">
                            <h3 class="text-xl font-bold text-lightest-slate mb-1">
                                ${c.title} <span class="text-green">@ ${c.sub}</span>
                            </h3>
                            <p class="font-mono text-sm text-slate mb-6">${c.date}</p>
                            <ul class="space-y-4">
                                <li class="text-slate relative pl-6 before:content-['‚ñπ'] before:text-green before:absolute before:left-0">${c.details}</li>
                                <li class="text-slate relative pl-6 before:content-['‚ñπ'] before:text-green before:absolute before:left-0">Successfully completed certification requirements.</li>
                            </ul>
                        </div>
                    `).join('')}
                </div>`;

                certificatesEl.innerHTML = buttonsHtml + contentHtml;

                // Add Event Listeners for Tabs
                document.querySelectorAll('.cert-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        // Reset all buttons
                        document.querySelectorAll('.cert-btn').forEach(b => {
                            b.className = 'cert-btn px-5 py-3 text-left font-mono text-xs whitespace-nowrap hover:bg-light-navy hover:text-green transition-all text-slate border-l-2 border-transparent';
                        });
                        // Activate current
                        e.target.className = 'cert-btn px-5 py-3 text-left font-mono text-xs whitespace-nowrap hover:bg-light-navy hover:text-green transition-all text-green border-l-2 border-green bg-light-navy/50';
                        
                        // Hide all contents
                        document.querySelectorAll('.cert-content').forEach(c => c.classList.add('hidden'));
                        // Show target
                        const targetId = e.target.getAttribute('data-id');
                        const targetContent = document.getElementById(`cert-${targetId}`);
                        targetContent.classList.remove('hidden');
                        targetContent.classList.add('fade-in-section', 'is-visible');
                    });
                });
            }
        }

        // --- 3. Interaction Logic ---

        // Contact Form
        const contactForm = document.getElementById('contact-form');
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitBtn = document.getElementById('submit-text');
            const loader = document.getElementById('submit-loader');
            
            submitBtn.classList.add('hidden');
            loader.classList.remove('hidden');

            const formData = new FormData(contactForm);
            const { error } = await supabase.from('messages').insert([
                { 
                    name: formData.get('name'), 
                    email: formData.get('email'), 
                    msg: formData.get('message') 
                }
            ]);

            loader.classList.add('hidden');
            submitBtn.classList.remove('hidden');

            if (error) {
                alert('Failed to send message.');
            } else {
                alert('Message sent successfully!');
                contactForm.reset();
            }
        });

        // API Playground
        const jokeBtn = document.getElementById('fetch-joke-btn');
        const apiOutput = document.getElementById('api-output');
        
        jokeBtn.addEventListener('click', async () => {
            jokeBtn.disabled = true;
            jokeBtn.innerText = 'FETCHING...';
            apiOutput.innerText = '// Connecting to remote server...';
            
            try {
                const res = await fetch('https://v2.jokeapi.dev/joke/Programming?blacklistFlags=nsfw,religious,political,racist,sexist,explicit&type=single');
                const data = await res.json();
                
                setTimeout(() => {
                    const jokeText = data.joke || `${data.setup}\n${data.delivery}`;
                    apiOutput.innerText = `// Success: 200 OK\n\n"${jokeText}"`;
                    jokeBtn.disabled = false;
                    jokeBtn.innerText = 'RUN SCRIPT';
                }, 800);
            } catch (e) {
                apiOutput.innerText = '// Error: 404 Humor Not Found';
                jokeBtn.disabled = false;
                jokeBtn.innerText = 'RETRY';
            }
        });

        // Meme Widget
        const memeTrigger = document.getElementById('meme-trigger');
        const memePopup = document.getElementById('meme-popup');
        const closeMeme = document.getElementById('close-meme');
        const nextMeme = document.getElementById('next-meme');
        const memeImg = document.getElementById('meme-img');
        const memeLoader = document.getElementById('meme-loader');
        const memeError = document.getElementById('meme-error');
        const memeCaption = document.getElementById('meme-caption');

        function toggleMeme() {
            memePopup.classList.toggle('hidden');
            setTimeout(() => {
                memePopup.classList.toggle('opacity-0');
                memePopup.classList.toggle('translate-y-4');
            }, 10);
            if (!memePopup.classList.contains('hidden') && memeImg.src === "") {
                fetchMeme();
            }
        }

        async function fetchMeme() {
            memeLoader.classList.remove('hidden');
            memeImg.classList.add('hidden');
            memeError.classList.add('hidden');
            nextMeme.disabled = true;
            nextMeme.innerText = 'Loading...';

            try {
                const subreddits = ['gifs', 'wholesomegifs', 'educationalgifs', 'funnygifs'];
                const randomSub = subreddits[Math.floor(Math.random() * subreddits.length)];
                const res = await fetch(`https://meme-api.com/gimme/${randomSub}`);
                const data = await res.json();
                
                if(data.url) {
                    memeImg.src = data.url;
                    memeImg.onload = () => {
                        memeLoader.classList.add('hidden');
                        memeImg.classList.remove('hidden');
                        nextMeme.disabled = false;
                        nextMeme.innerText = 'Next GIF ü§£';
                    };
                    memeCaption.innerText = data.title;
                } else {
                    throw new Error('No URL');
                }
            } catch (e) {
                memeLoader.classList.add('hidden');
                memeError.classList.remove('hidden');
                nextMeme.disabled = false;
                nextMeme.innerText = 'Try Again';
            }
        }

        memeTrigger.addEventListener('click', (e) => { e.stopPropagation(); toggleMeme(); });
        closeMeme.addEventListener('click', (e) => { e.stopPropagation(); toggleMeme(); });
        nextMeme.addEventListener('click', (e) => { e.stopPropagation(); fetchMeme(); });

        // Mobile Menu
        const mobileBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileLinks = document.querySelectorAll('.mobile-link');
        
        mobileBtn.addEventListener('click', () => {
            const spans = mobileBtn.querySelectorAll('span');
            const isOpen = !mobileMenu.classList.contains('translate-x-full');
            
            if (isOpen) {
                mobileMenu.classList.add('translate-x-full');
                spans[0].style.transform = 'none';
                spans[1].style.opacity = '1';
                spans[2].style.transform = 'none';
            } else {
                mobileMenu.classList.remove('translate-x-full');
                spans[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
                spans[1].style.opacity = '0';
                spans[2].style.transform = 'rotate(-45deg) translate(5px, -5px)';
            }
        });

        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileBtn.click();
            });
        });

        // Navbar Scroll Effect
        let lastScrollY = window.scrollY;
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > lastScrollY && window.scrollY > 100) {
                navbar.style.transform = 'translateY(-100%)';
            } else {
                navbar.style.transform = 'translateY(0)';
            }
            lastScrollY = window.scrollY;
            
            // Fade in sections
            document.querySelectorAll('.fade-in-section').forEach(el => {
                const rect = el.getBoundingClientRect();
                if (rect.top <= window.innerHeight * 0.75) {
                    el.classList.add('is-visible');
                }
            });
        });

        // --- 4. Visual Effects (Ribbons) ---
        function initRibbons() {
            const container = document.getElementById('ribbons-container');
            if (!container || !window.OGL) return;

            const { Renderer, Transform, Vec3, Color, Polyline } = window.OGL;
            
            const config = {
                colors: ["#FC8EAC", "#64ffda", "#a8b2d1"],
                baseSpring: 0.03, baseFriction: 0.9, baseThickness: 30, offsetFactor: 0.05,
                maxAge: 500, pointCount: 50, speedMultiplier: 0.6,
                enableFade: false, enableShaderEffect: false, effectAmplitude: 2
            };

            const renderer = new Renderer({ dpr: window.devicePixelRatio || 2, alpha: true });
            const gl = renderer.gl;
            container.appendChild(gl.canvas);
            gl.canvas.style.width = '100%';
            gl.canvas.style.height = '100%';

            const scene = new Transform();
            const lines = [];

            const vertex = `precision highp float; attribute vec3 position; attribute vec3 next; attribute vec3 prev; attribute vec2 uv; attribute float side; uniform vec2 uResolution; uniform float uDPR; uniform float uThickness; uniform float uTime; varying vec2 vUV; vec4 getPosition() { vec4 current = vec4(position, 1.0); vec2 aspect = vec2(uResolution.x / uResolution.y, 1.0); vec2 nextScreen = next.xy * aspect; vec2 prevScreen = prev.xy * aspect; vec2 tangent = normalize(nextScreen - prevScreen); vec2 normal = vec2(-tangent.y, tangent.x); normal /= aspect; normal *= mix(1.0, 0.1, pow(abs(uv.y - 0.5) * 2.0, 2.0)); float dist = length(nextScreen - prevScreen); normal *= smoothstep(0.0, 0.02, dist); float pixelWidthRatio = 1.0 / (uResolution.y / uDPR); float pixelWidth = current.w * pixelWidthRatio; normal *= pixelWidth * uThickness; current.xy -= normal * side; return current; } void main() { vUV = uv; gl_Position = getPosition(); }`;
            const fragment = `precision highp float; uniform vec3 uColor; uniform float uOpacity; varying vec2 vUV; void main() { gl_FragColor = vec4(uColor, uOpacity); }`;

            function resize() {
                renderer.setSize(container.clientWidth, container.clientHeight);
                lines.forEach(line => line.polyline.resize());
            }
            window.addEventListener('resize', resize);

            const center = (config.colors.length - 1) / 2;
            config.colors.forEach((color, index) => {
                const line = {
                    spring: config.baseSpring + (Math.random() - 0.5) * 0.05,
                    friction: config.baseFriction + (Math.random() - 0.5) * 0.05,
                    mouseVelocity: new Vec3(),
                    mouseOffset: new Vec3((index - center) * config.offsetFactor, 0, 0),
                    points: Array(config.pointCount).fill(0).map(() => new Vec3())
                };
                line.polyline = new Polyline(gl, {
                    points: line.points, vertex, fragment,
                    uniforms: { uColor: { value: new Color(color) }, uThickness: { value: config.baseThickness }, uOpacity: { value: 1.0 } }
                });
                line.polyline.mesh.setParent(scene);
                lines.push(line);
            });
            resize();

            const mouse = new Vec3();
            function updateMouse(e) {
                if(e.changedTouches && e.changedTouches.length) {
                    mouse.set((e.changedTouches[0].clientX / container.clientWidth) * 2 - 1, (e.changedTouches[0].clientY / container.clientHeight) * -2 + 1, 0);
                } else {
                    mouse.set((e.clientX / container.clientWidth) * 2 - 1, (e.clientY / container.clientHeight) * -2 + 1, 0);
                }
            }
            document.addEventListener('mousemove', updateMouse);
            document.addEventListener('touchmove', updateMouse);

            const tmp = new Vec3();
            function update() {
                requestAnimationFrame(update);
                lines.forEach(line => {
                    tmp.copy(mouse).add(line.mouseOffset).sub(line.points[0]).multiply(line.spring);
                    line.mouseVelocity.add(tmp).multiply(line.friction);
                    line.points[0].add(line.mouseVelocity);
                    for(let i=1; i<line.points.length; i++) line.points[i].lerp(line.points[i-1], 0.9);
                    line.polyline.updateGeometry();
                });
                renderer.render({ scene });
            }
            update();
        }

        // --- 5. Visual Effects (ClickSpark) ---
        function initClickSpark() {
            const canvas = document.getElementById('click-spark-canvas');
            if(!canvas) return;
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const sparks = [];
            
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });

            document.addEventListener('click', (e) => {
                for(let i=0; i<8; i++) {
                    sparks.push({
                        x: e.clientX, y: e.clientY,
                        angle: (Math.PI * 2 * i) / 8,
                        startTime: performance.now()
                    });
                }
            });

            function draw(time) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for(let i=sparks.length-1; i>=0; i--) {
                    const s = sparks[i];
                    const elapsed = time - s.startTime;
                    if(elapsed > 400) { sparks.splice(i, 1); continue; }
                    
                    const p = elapsed / 400;
                    const ease = p * (2 - p);
                    const dist = ease * 30; // Radius
                    const len = 10 * (1 - ease);
                    
                    ctx.beginPath();
                    ctx.moveTo(s.x + dist * Math.cos(s.angle), s.y + dist * Math.sin(s.angle));
                    ctx.lineTo(s.x + (dist + len) * Math.cos(s.angle), s.y + (dist + len) * Math.sin(s.angle));
                    ctx.strokeStyle = '#64ffda';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
                requestAnimationFrame(draw);
            }
            requestAnimationFrame(draw);
        }

        // Init All
        document.addEventListener('DOMContentLoaded', () => {
            fetchAndRender();
            initRibbons();
            initClickSpark();
        });
    </script>
</body>
</html>